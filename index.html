<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Will AR - Laboratorio Matem√°tico</title>
    <!-- LIBRER√çAS -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.3/aframe/build/aframe-ar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <style>
        /* ESTILOS GENERALES */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; overflow: hidden; font-family: 'Segoe UI', sans-serif; background-color: #000; width: 100vw; height: 100vh; position: fixed; }
        
        /* PANTALLA DE CARGA */
        #loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #1a1a2e 0%, #0f0f1e 100%); z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; transition: opacity 0.5s; }
        .loader { border: 8px solid rgba(52, 152, 219, 0.2); border-top: 8px solid #3498db; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin-bottom: 15px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* MEN√ö PRINCIPAL */
        #menu-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #2c3e50 0%, #000000 100%); z-index: 2000; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; overflow-y: auto; padding: 20px; color: white; transition: transform 0.5s ease-in-out; }
        #menu-overlay.hidden { transform: translateY(-100%); }
        
        .card { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 20px; width: 95%; max-width: 450px; text-align: center; border: 1px solid rgba(255,255,255,0.1); margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); backdrop-filter: blur(10px); }
        h1 { margin: 0 0 5px 0; color: #3498db; font-size: 2rem; letter-spacing: 2px; }
        h2 { margin: 0; font-size: 1rem; font-weight: 300; color: #bdc3c7; margin-bottom: 15px; }
        label { display: block; text-align: left; margin-top: 12px; margin-bottom: 5px; color: #ecf0f1; font-size: 0.85rem; }
        
        select, button { width: 100%; padding: 12px; margin-top: 5px; border-radius: 10px; border: none; background: rgba(255,255,255,0.15); color: white; font-size: 1rem; outline: none; }
        button { font-weight: bold; cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.3); margin-top: 12px; }
        button:active { transform: scale(0.98); }
        .btn-gen { background: linear-gradient(135deg, #2980b9 0%, #3498db 100%); }
        .btn-start { background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); font-size: 1.2rem; display: none; margin-top: 15px;}
        
        /* INPUT ARCHIVO */
        .file-input-wrapper { position: relative; width: 100%; margin-top: 8px; }
        .file-input-wrapper input { position: absolute; opacity: 0; width: 100%; height: 100%; cursor: pointer; z-index: 10; }
        .file-input-label { display: block; width: 100%; padding: 10px; background: rgba(142, 68, 173, 0.8); color: white; border-radius: 10px; text-align: center; cursor: pointer; }
        #qr-area { background: white; padding: 10px; border-radius: 10px; display: none; margin: 15px auto; width: fit-content; }
        #image-preview { display: none; margin-top: 8px; max-width: 100%; border-radius: 10px; max-height: 120px; }
        .alert { background: #f39c12; color: #000; padding: 10px; border-radius: 8px; margin: 10px 0; font-size: 0.85rem; display: none; }
        
        /* UI CONTROLES AR */
        #camera-status { position: fixed; top: 15px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.9); color: #fff; padding: 10px 20px; border-radius: 20px; z-index: 1002; display: none; border: 2px solid #3498db; font-weight: bold;}
        #ar-controls { position: fixed; bottom: 0; left: 0; width: 100%; background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.7) 100%); padding: 15px; box-sizing: border-box; display: none; z-index: 1001; color: white; border-top: 3px solid #3498db; backdrop-filter: blur(15px); }
        
        .control-row { display: flex; align-items: center; justify-content: space-between; margin: 10px 0; gap: 10px; }
        input[type=range] { flex: 1; accent-color: #3498db; height: 30px; }
        .action-buttons { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin: 15px 0; }
        .btn-info-toggle { background: rgba(52, 152, 219, 0.8); padding: 10px; border-radius: 8px; font-size: 0.9rem; }
        .btn-exit { background: #e74c3c; grid-column: span 3; }
        
        /* PANEL INFORMATIVO */
        #figura-info-panel { position: fixed; top: 70px; right: -420px; width: 380px; max-height: 80vh; background: rgba(20,20,30,0.95); border: 2px solid #3498db; border-radius: 15px; padding: 15px; color: white; z-index: 1002; transition: right 0.3s; overflow-y: auto; }
        #figura-info-panel.visible { right: 10px; }
        .info-header { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 10px; }
        .close-info { background: #c0392b; border: none; color: white; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; }
        
        /* TARJETA DE MEDICIONES */
        .measurements { background: rgba(0,0,0,0.5); padding: 10px; border-radius: 10px; margin: 10px 0; border: 1px solid #3498db; }
        .measurement-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; text-align: center; font-size: 0.85rem; }
        .measurement-item { background: rgba(52, 152, 219, 0.2); padding: 5px; border-radius: 5px; }
        .measurement-value { color: #3498db; font-weight: bold; font-size: 1.1rem; }
        
        /* SWITCH TOGGLE */
        .toggle-container { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; }
        .toggle-switch { position: relative; width: 50px; height: 26px; background: #555; border-radius: 13px; cursor: pointer; transition: background 0.3s; }
        .toggle-switch.active { background: #27ae60; }
        .toggle-slider { position: absolute; top: 3px; left: 3px; width: 20px; height: 20px; background: white; border-radius: 50%; transition: transform 0.3s; }
        .toggle-switch.active .toggle-slider { transform: translateX(24px); }

        /* CONTENEDOR ESCENA */
        #ar-scene-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
    </style>
</head>
<body>

    <div id="loading-screen"><div class="loader"></div><p>Cargando Laboratorio AR...</p></div>

    <div id="menu-overlay">
        <div class="card">
            <h1>üî¨ WILL AR</h1>
            <h2>Laboratorio Matem√°tico</h2>
            
            <div class="alert" id="https-alert">‚ö†Ô∏è Requiere HTTPS para m√≥vil</div>

            <label>1Ô∏è‚É£ Textura (Opcional)</label>
            <div class="file-input-wrapper">
                <input type="file" id="imgUpload" accept="image/*">
                <label class="file-input-label">üìÅ Seleccionar Imagen</label>
            </div>
            <img id="image-preview" alt="Preview">
            
            <label>2Ô∏è‚É£ Seleccionar Figura</label>
            <select id="figura">
                <option value="box">üì¶ Cubo</option>
                <option value="sphere">‚öΩ Esfera</option>
                <option value="cylinder">üõ¢Ô∏è Cilindro</option>
                <option value="cone">üî∫ Cono</option>
                <option value="torus">üç© Toroide</option>
                <option value="tetrahedron">üî∫ Tetraedro</option>
                <option value="dodecahedron">üíé Dodecaedro</option>
                <option value="icosahedron">‚öΩ Icosaedro</option>
                <option value="octahedron">üí† Octaedro</option>
            </select>

            <button class="btn-gen" onclick="generarConfig()">‚öôÔ∏è CONFIGURAR OBJETO</button>
            <div id="qr-area"><div id="qrcode"></div></div>
            <button id="btn-iniciar" class="btn-start" onclick="iniciarAR()">üöÄ INICIAR AR</button>
        </div>
        
        <div style="color: #aaa; font-size: 0.8rem; text-align: center; max-width: 400px; margin-bottom: 20px;">
            <strong>INSTRUCCIONES:</strong><br>
            1. Configura tu figura.<br>2. Presiona "INICIAR AR".<br>3. Apunta al marcador HIRO.<br>
            <br>
            <a href="https://ar-js-org.github.io/AR.js/data/images/hiro.png" target="_blank" style="color: #3498db;">üëâ Descargar Marcador HIRO</a>
        </div>
    </div>

    <div id="camera-status">üîç Buscando marcador...</div>

    <div id="ar-controls">
        <div style="text-align: center; margin-bottom: 10px; font-weight: bold; color: #3498db;">üìç <span id="label-figura">CUBO</span></div>
        <div class="action-buttons">
            <button class="btn-info-toggle" onclick="toggleInfoPanel()">üìñ Info</button>
            <button class="btn-info-toggle" onclick="toggleRotacion()" id="btn-rotation">‚è∏Ô∏è Pausar</button>
            <button class="btn-exit" onclick="location.reload()">‚ùå Salir</button>
        </div>
        <div class="control-row">
            <span>Escala:</span>
            <input type="range" min="0.5" max="3" step="0.1" value="1" oninput="cambiarEscala(this.value)">
            <span id="scale-value">1.0x</span>
        </div>
        <div class="toggle-container">
            <span>üìê Regla</span>
            <div class="toggle-switch active" id="ruler-toggle" onclick="toggleRegla()"><div class="toggle-slider"></div></div>
        </div>
        <div class="measurements">
            <div class="measurement-grid">
                <div class="measurement-item"><small>Alto</small><br><div class="measurement-value" id="measure-height">100</div></div>
                <div class="measurement-item"><small>Ancho</small><br><div class="measurement-value" id="measure-width">100</div></div>
                <div class="measurement-item"><small>Prof.</small><br><div class="measurement-value" id="measure-depth">100</div></div>
            </div>
            <div style="text-align:center; margin-top:5px; border-top:1px solid #555; padding-top:5px;">Volumen: <strong id="measure-volume">1,000,000</strong> cm¬≥</div>
        </div>
    </div>

    <div id="figura-info-panel">
        <div class="info-header">
            <strong id="info-figura-titulo" style="font-size:1.2rem; color:#3498db;">CUBO</strong>
            <button class="close-info" onclick="toggleInfoPanel()">√ó</button>
        </div>
        <div id="info-contenido" style="font-size: 0.9rem; line-height: 1.5;"></div>
    </div>

    <!-- Contenedor para inyecci√≥n din√°mica -->
    <div id="ar-scene-container"></div>

    <script>
        // VARIABLES GLOBALES
        let texturaData = null; let figuraSeleccionada = "box"; let escalaActual = 1;
        let rotacionActiva = true; let reglaVisible = true; let sceneLoaded = false;

        // BASE DE DATOS DE FIGURAS
        const dimensionesBase = {
            box: { h: 100, w: 100, d: 100 }, sphere: { h: 160, w: 160, d: 160 },
            cylinder: { h: 200, w: 100, d: 100 }, cone: { h: 200, w: 100, d: 100 },
            torus: { h: 40, w: 200, d: 200 }, tetrahedron: { h: 140, w: 100, d: 100 },
            dodecahedron: { h: 160, w: 160, d: 160 }, icosahedron: { h: 160, w: 160, d: 160 },
            octahedron: { h: 140, w: 100, d: 100 }
        };

        const figurasInfo = {
            box: { n: "CUBO", d: "Poliedro de 6 caras cuadradas.", f: "V=a¬≥, A=6a¬≤", a: "Dados, cajas." },
            sphere: { n: "ESFERA", d: "Cuerpo redondo perfecto.", f: "V=4/3œÄr¬≥, A=4œÄr¬≤", a: "Planetas, pelotas." },
            cylinder: { n: "CILINDRO", d: "Base circular y cuerpo recto.", f: "V=œÄr¬≤h, A=2œÄrh", a: "Tuber√≠as, latas." },
            cone: { n: "CONO", d: "Base circular y v√©rtice.", f: "V=1/3œÄr¬≤h", a: "Conos tr√°fico, helados." },
            torus: { n: "TOROIDE", d: "Forma de anillo o dona.", f: "V=2œÄ¬≤Rr¬≤", a: "Neum√°ticos." },
            tetrahedron: { n: "TETRAEDRO", d: "4 caras triangulares.", f: "V=a¬≥/(6‚àö2)", a: "Mol√©culas." },
            dodecahedron: { n: "DODECAEDRO", d: "12 caras pentagonales.", f: "V‚âà7.66a¬≥", a: "Dados D12." },
            icosahedron: { n: "ICOSAEDRO", d: "20 caras triangulares.", f: "V‚âà2.18a¬≥", a: "Virus, D20." },
            octahedron: { n: "OCTAEDRO", d: "8 caras triangulares.", f: "V=(‚àö2/3)a¬≥", a: "Dados D8, cristales." }
        };

        // PLANTILLA DE ESCENA (CON REGLA DETALLADA)
        const sceneTemplate = `
        <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;" vr-mode-ui="enabled: false" renderer="logarithmicDepthBuffer: true; precision: medium;" loading-screen="enabled: false" device-orientation-permission-ui="enabled: false">
            <a-assets timeout="30000">
                <img id="textura-asset" crossorigin="anonymous" src=""> 
                <img id="textura-defecto" src="https://cdn.pixabay.com/photo/2016/11/29/05/45/astronomy-1867616_960_720.jpg" crossorigin="anonymous">
            </a-assets>
            
            <a-marker preset="hiro" id="hiro-marker" smooth="true" smoothCount="10" smoothTolerance="0.01" smoothThreshold="5">
                <a-entity id="contenedor-principal" position="0 0 0">
                    
                    <!-- MODELO 3D Y WIREFRAME -->
                    <a-entity id="modelo-3d" position="0 0.5 0"></a-entity>
                    <a-entity id="wireframe-guia" position="0 0.5 0" material="wireframe: true; color: #FFE66D; opacity: 0.8"></a-entity>

                    <!-- REGLA DIGITAL COMPLETA (3 EJES) -->
                    <a-entity id="regla-virtual" visible="true" position="0 0 0">
                        
                        <!-- EJE VERTICAL (ALTURA) - AMARILLO -->
                        <a-entity position="-0.9 0 0">
                            <a-cylinder radius="0.02" height="2.4" color="#FFD700" material="shader: flat; emissive: #FFD700; emissiveIntensity: 0.8;"></a-cylinder>
                            <!-- Marcas -->
                            <a-box position="0 -1.0 0" width="0.18" height="0.03" depth="0.03" color="#FFD700"></a-box>
                            <a-box position="0 0.0 0" width="0.22" height="0.035" depth="0.035" color="#FFD700"></a-box>
                            <a-box position="0 1.0 0" width="0.18" height="0.03" depth="0.03" color="#FFD700"></a-box>
                            <!-- Textos -->
                            <a-text value="0cm" position="-0.30 0.0 0" scale="0.4 0.4 0.4" color="#FFD700" align="right" shader="flat"></a-text>
                            <a-text value="100cm" position="-0.30 1.0 0" scale="0.35 0.35 0.35" color="#FFD700" align="right" shader="flat"></a-text>
                            <a-text value="ALTURA" position="-0.30 -1.3 0" align="right" color="#FFD700" scale="0.32 0.32 0.32" shader="flat"></a-text>
                        </a-entity>

                        <!-- EJE HORIZONTAL (ANCHO) - VERDE -->
                        <a-entity position="0 -0.7 0">
                            <a-cylinder radius="0.02" height="2.4" color="#00FF88" rotation="0 0 90" material="shader: flat; emissive: #00FF88; emissiveIntensity: 0.8;"></a-cylinder>
                            <!-- Marcas -->
                            <a-box position="-0.5 0 0" width="0.03" height="0.22" depth="0.03" color="#00FF88"></a-box>
                            <a-box position="0.5 0 0" width="0.03" height="0.22" depth="0.03" color="#00FF88"></a-box>
                            <!-- Textos -->
                            <a-text value="0cm" position="0.0 -0.28 0" scale="0.4 0.4 0.4" color="#00FF88" align="center" shader="flat"></a-text>
                            <a-text value="100cm" position="1.0 -0.28 0" scale="0.35 0.35 0.35" color="#00FF88" align="center" shader="flat"></a-text>
                            <a-text value="ANCHO" position="0 -0.4 0" align="center" color="#00FF88" scale="0.32 0.32 0.32" shader="flat"></a-text>
                        </a-entity>

                        <!-- EJE PROFUNDIDAD - ROJO -->
                        <a-entity position="0.9 0 0">
                            <a-cylinder radius="0.02" height="2.4" color="#FF6B6B" rotation="0 90 90" material="shader: flat; emissive: #FF6B6B; emissiveIntensity: 0.8;"></a-cylinder>
                            <!-- Marcas -->
                            <a-box position="0 0 -0.5" width="0.03" height="0.22" depth="0.03" color="#FF6B6B"></a-box>
                            <a-box position="0 0 0.5" width="0.03" height="0.22" depth="0.03" color="#FF6B6B"></a-box>
                            <!-- Textos -->
                            <a-text value="0cm" position="0 -0.28 0.0" scale="0.4 0.4 0.4" color="#FF6B6B" align="center" shader="flat"></a-text>
                            <a-text value="100cm" position="0 -0.28 1.0" scale="0.35 0.35 0.35" color="#FF6B6B" align="center" shader="flat"></a-text>
                            <a-text value="PROF" position="0 -0.4 0" align="center" color="#FF6B6B" scale="0.32 0.32 0.32" shader="flat"></a-text>
                        </a-entity>
                    </a-entity>

                </a-entity>
            </a-marker>
            <a-entity camera></a-entity>
        </a-scene>`;

        // EVENTOS INICIALES
        window.addEventListener('load', () => {
            setTimeout(() => { document.getElementById('loading-screen').classList.add('hidden'); }, 800);
            if (location.protocol !== 'https:' && location.hostname !== 'localhost') document.getElementById('https-alert').style.display = 'block';
        });

        document.getElementById('imgUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if(file) {
                const reader = new FileReader();
                reader.onload = function(evt) {
                    texturaData = evt.target.result;
                    const preview = document.getElementById('image-preview');
                    preview.src = texturaData; preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });

        function generarConfig() {
            figuraSeleccionada = document.getElementById('figura').value;
            const qrContainer = document.getElementById('qrcode');
            qrContainer.innerHTML = "";
            try {
                new QRCode(qrContainer, { text: JSON.stringify({app: "WILL-AR", f: figuraSeleccionada}), width: 128, height: 128 });
                document.getElementById('qr-area').style.display = "block";
                document.getElementById('btn-iniciar').style.display = "block";
            } catch(e) { console.error(e); }
        }

        // INICIAR AR (CORRECCI√ìN DE C√ÅMARA + INYECCI√ìN)
        async function iniciarAR() {
            document.getElementById('menu-overlay').classList.add('hidden');
            document.getElementById('ar-controls').style.display = "block";
            document.getElementById('camera-status').style.display = "block";

            const container = document.getElementById('ar-scene-container');
            container.innerHTML = sceneTemplate;

            setTimeout(() => {
                if (!sceneLoaded) {
                    sceneLoaded = true;
                    if (texturaData) document.getElementById('textura-asset').setAttribute('src', texturaData);
                    crearFigura3D();
                    actualizarInfo();
                    const marker = document.querySelector('#hiro-marker');
                    if (marker) {
                        marker.addEventListener('markerFound', () => {
                            document.getElementById('camera-status').innerHTML = "‚úÖ Marcador Detectado";
                            document.getElementById('camera-status').style.borderColor = "#2ecc71";
                        });
                        marker.addEventListener('markerLost', () => {
                            document.getElementById('camera-status').innerHTML = "üîç Buscando...";
                            document.getElementById('camera-status').style.borderColor = "#3498db";
                        });
                    }
                }
            }, 1500);
        }

        function crearFigura3D() {
            const modelo = document.getElementById('modelo-3d');
            const guia = document.getElementById('wireframe-guia');
            let geo = '';
            switch(figuraSeleccionada) {
                case 'box': geo = 'primitive: box; width: 1; height: 1; depth: 1'; break;
                case 'sphere': geo = 'primitive: sphere; radius: 0.5'; break;
                case 'cylinder': geo = 'primitive: cylinder; radius: 0.5; height: 1.5'; break;
                case 'cone': geo = 'primitive: cone; radiusBottom: 0.5; height: 1.5'; break;
                case 'torus': geo = 'primitive: torus; radius: 0.5; radiusTubular: 0.15'; break;
                case 'tetrahedron': geo = 'primitive: tetrahedron; radius: 0.6'; break;
                case 'dodecahedron': geo = 'primitive: dodecahedron; radius: 0.5'; break;
                case 'icosahedron': geo = 'primitive: icosahedron; radius: 0.5'; break;
                case 'octahedron': geo = 'primitive: octahedron; radius: 0.6'; break;
            }
            modelo.setAttribute('geometry', geo);
            modelo.setAttribute('material', texturaData ? 'src: #textura-asset; metalness: 0.3; roughness: 0.5' : 'src: #textura-defecto; metalness: 0.3; roughness: 0.5');
            if(rotacionActiva) modelo.setAttribute('animation', 'property: rotation; to: 0 360 0; dur: 10000; loop: true; easing: linear');
            else modelo.removeAttribute('animation');
            guia.setAttribute('geometry', geo);
            guia.setAttribute('scale', '1.05 1.05 1.05');
            actualizarMediciones();
        }

        function toggleRotacion() {
            rotacionActiva = !rotacionActiva;
            const modelo = document.getElementById('modelo-3d');
            const btn = document.getElementById('btn-rotation');
            if(modelo) {
                if(rotacionActiva) { modelo.setAttribute('animation', 'property: rotation; to: 0 360 0; dur: 10000; loop: true; easing: linear'); btn.innerHTML = "‚è∏Ô∏è Pausar"; }
                else { modelo.removeAttribute('animation'); btn.innerHTML = "‚ñ∂Ô∏è Rotar"; }
            }
        }

        // CAMBIAR ESCALA (MODELO + REGLA)
        function cambiarEscala(val) {
            escalaActual = parseFloat(val);
            const modelo = document.getElementById('modelo-3d');
            const guia = document.getElementById('wireframe-guia');
            const regla = document.getElementById('regla-virtual');
            
            if(modelo) modelo.setAttribute('scale', `${val} ${val} ${val}`);
            if(guia) guia.setAttribute('scale', `${val*1.05} ${val*1.05} ${val*1.05}`);
            
            // IMPORTANTE: Escalar la regla tambi√©n para que mantenga proporci√≥n visual
            if(regla) regla.setAttribute('scale', `${val} ${val} ${val}`);
            
            document.getElementById('scale-value').innerText = val.toFixed(1) + "x";
            actualizarMediciones();
        }

        function toggleRegla() {
            reglaVisible = !reglaVisible;
            const regla = document.getElementById('regla-virtual');
            if(regla) regla.setAttribute('visible', reglaVisible);
            const toggle = document.getElementById('ruler-toggle');
            if(reglaVisible) toggle.classList.add('active'); else toggle.classList.remove('active');
        }

        function actualizarMediciones() {
            const b = dimensionesBase[figuraSeleccionada];
            const s = escalaActual;
            const h = Math.round(b.h * s), w = Math.round(b.w * s), d = Math.round(b.d * s);
            document.getElementById('measure-height').innerText = h;
            document.getElementById('measure-width').innerText = w;
            document.getElementById('measure-depth').innerText = d;
            document.getElementById('measure-volume').innerText = (h*w*d).toLocaleString('es-ES');
        }

        function actualizarInfo() {
            const info = figurasInfo[figuraSeleccionada];
            document.getElementById('label-figura').innerText = info.n;
            document.getElementById('info-figura-titulo').innerText = info.n;
            document.getElementById('info-contenido').innerHTML = `<p><strong>Definici√≥n:</strong><br>${info.d}</p><p><strong>F√≥rmulas:</strong><br>${info.f}</p><p style="color:#3498db; margin-top:10px;"><strong>Aplicaciones:</strong><br>${info.a}</p>`;
        }

        function toggleInfoPanel() { document.getElementById('figura-info-panel').classList.toggle('visible'); }
    </script>
</body>
</html>
